##
# parser args for manipulating profiles
profile_title: &profile_title 
    - 'title'
    -   
        help: 'Title of profile'
        action: 'store'
        nargs: '?'
        default: null
profile_paths: &profile_paths
    - '-f'
    - 
        help: 'Path to profile'
        action: 'append'
        metavar: 'path'
        dest: 'profile_paths'
profile_n: &profile_n
    - '-n'
    -
        action: 'store'
        help: 'Profile number'
##
# Catch all parser for finding action
pre:
    args:
        -   
            - 'action'
            -
                help: 'Action to perform (default="auto")'
                nargs: '?'
                action: 'store'
##
# Base options that should always be available
base:
    args:
        -
            - '-q'
            - 
                help: 'Suppress all output.'
                action: 'store_true'
        -
            - '-v'
            - 
                help: 'Increase verbosity level (4 is max)'
                default: 0
                action: 'count'
                dest: 'verbosity'
        -
            - '--user-dir'
            - 
                help: 'Location of program data. Default is ~/.rainmaker'
                dest: 'user_dir'
                default: '~/.rainmaker'
        -
            - '--log'
            - 
                help: 'Set log level'
                choices: ['debug','info','warn','error','none']
                dest: 'log_level'
                default: 'info'
auto:
    args:
        -   
            - 'action'
            -
                help: |
                    Action to perform (default="auto")

                    auto    -   Start all profiles where 'auto' = True
                    
                    daemon  -   Start all daemon profiles where 'auto' = daemon,
                                Only log file system events.

                    create  -   Create a new profile

                    delete  -   Delete a profile

                    list    -   List all profiles or specific
                                information about a single profile
                    
                    update  -   Update the contents of a profile

                    start   -   Only run the specified profile(s)

                    info    -   Display config information and exit
                    
                choices: ['create','delete','daemon','list','update','start','auto','info']
                default: 'auto'
                nargs: '?'
                action: 'store'
create:

    args:
        -   
            - 'action'
            -
                help: 'Create a profile'
                metavar: 'create'
                action: 'store'
        -
            - 'type'
            -
                choices: ['unison','basic']
                help: 'Type of profile to create. Basic creates a generic profile. Unison creates a Unison sync profile.'
                default: 'unison'
                action: 'store'
                nargs: '?'
list:
    args:
        -   
            - 'action'
            -
                help: 'List all profiles, or the details of a single profile'
                metavar: 'list'
                action: 'store'
        - *profile_title
        - *profile_n
        - *profile_paths
        -
            - '--attr'
            -
                help: 'List value of specified attribute'
                action: 'append'
                dest: 'attrs'
delete:
    args:
        -   
            - 'action'
            -
                help: 'Delete a profile'
                metavar: 'delete'
                action: 'store'
        - *profile_title
        - *profile_n
        - *profile_paths
update:
    args:
        -   
            - 'action'
            -
                help: 'Update a profile'
                metavar: 'update'
                action: 'store'
        - *profile_title
        - *profile_n
        - *profile_paths
start:
    args:
        -   
            - 'action'
            -
                help: 'Start a profile'
                metavar: 'start'
                action: 'store'
        - *profile_title
        - *profile_n
        - *profile_paths
stop:
    args:
        -   
            - 'action'
            -
                help: 'Stop a running profile'
                metavar: 'stop'
                action: 'store'
        - *profile_title
        - *profile_n
        - *profile_paths
status:
    args:
        -
            - 'action'
            -
                help: 'Status of app'
                action: 'store'
                metavar: 'status'
info:
    args:
        -
            - 'action'
            -
                help: 'Info about installation'
                action: 'store'
                metavar: 'info'
daemon:
    args:
        -   
            - 'action'
            -
                help: 'Daemon mode, monitor file system for activity'
                metavar: 'daemon'
                action: 'store'
        - *profile_title
        - *profile_n
        - *profile_paths
